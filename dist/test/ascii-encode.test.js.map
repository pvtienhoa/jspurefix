{"version":3,"file":"ascii-encode.test.js","sourceRoot":"","sources":["../../src/test/ascii-encode.test.ts"],"names":[],"mappings":"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","sourcesContent":["import * as path from 'path'\r\nimport { FixDefinitions, MessageDefinition, ComponentFieldDefinition, ContainedFieldSet } from '../dictionary'\r\nimport { AsciiEncoder, TimeFormatter, AsciiChars } from '../buffer'\r\nimport { ILooseObject } from '../collections/collection'\r\nimport { ISessionDescription, AsciiMsgTransmitter } from '../transport'\r\nimport { JsFixConfig } from '../config'\r\nimport { getDefinitions } from '../util'\r\n\r\nconst root: string = path.join(__dirname, '../../data')\r\n\r\nlet definitions: FixDefinitions\r\nlet session: AsciiMsgTransmitter\r\nlet encoder: AsciiEncoder\r\nlet nos: MessageDefinition\r\nlet er: MessageDefinition\r\n\r\nconst localDate: Date = new Date(2018, 6, 25)\r\nconst utcTimeStamp: Date = new Date(Date.UTC(2018, 5, 10, 16, 35, 0, 246))\r\nconst utcDate: Date = new Date(Date.UTC(2018, 5, 10, 0, 0, 0, 0))\r\nconst utcTime: Date = new Date(Date.UTC(2018, 0, 1, 16, 35, 0, 246))\r\n\r\nbeforeAll(async () => {\r\n  const sessionDescription: ISessionDescription = require(path.join(root, 'session/qf-fix44.json'))\r\n  definitions = await getDefinitions(sessionDescription.application.dictionary)\r\n  const config = new JsFixConfig(null, definitions, sessionDescription, AsciiChars.Pipe)\r\n  session = new AsciiMsgTransmitter(config)\r\n  encoder = new AsciiEncoder(session.buffer, definitions, new TimeFormatter(session.buffer), AsciiChars.Pipe)\r\n  nos = definitions.message.get('NewOrderSingle')\r\n  er = definitions.message.get('ExecutionReport')\r\n}, 45000)\r\n\r\ntest('expect a definition ', () => {\r\n  expect(nos).toBeTruthy()\r\n})\r\n\r\nfunction toFix (o: ILooseObject, set?: ContainedFieldSet): string {\r\n  session.buffer.reset()\r\n  if (set) {\r\n    encoder.encode(o, set.name)\r\n  } else {\r\n    encoder.encode(o, nos.name)\r\n  }\r\n  return session.buffer.toString()\r\n}\r\n\r\ntest('encode string ClOrdID ', () => {\r\n  const no: ILooseObject = {}\r\n  no.ClOrdID = 'Order-a'\r\n  const fix: string = toFix(no)\r\n  expect(fix).toEqual('11=Order-a|')\r\n})\r\n\r\ntest('encode empty string', () => {\r\n  const no: ILooseObject = {}\r\n  no.ClOrdID = ''\r\n  const fix: string = toFix(no)\r\n  expect(fix).toEqual('11=|')\r\n})\r\n\r\ntest('encode null string', () => {\r\n  const no: ILooseObject = {}\r\n  no.ClOrdID = null\r\n  const fix: string = toFix(no)\r\n  expect(fix).toEqual('')\r\n})\r\n\r\ntest('encode +ve numeric (int) Price ', () => {\r\n  const no: ILooseObject = {}\r\n  no.Price = 100\r\n  const fix: string = toFix(no)\r\n  expect(fix).toEqual('44=100|')\r\n})\r\n\r\ntest('encode -ve numeric (int) Price ', () => {\r\n  const no: ILooseObject = {}\r\n  no.Price = -100\r\n  const fix: string = toFix(no)\r\n  expect(fix).toEqual('44=-100|')\r\n})\r\n\r\ntest('encode +ve numeric (double 8dp) Price ', () => {\r\n  const no: ILooseObject = {}\r\n  no.Price = 123.12345678\r\n  const fix: string = toFix(no)\r\n  expect(fix).toEqual('44=123.12345678|')\r\n})\r\n\r\ntest('encode +ve numeric (double 14dp) Price ', () => {\r\n  const no: ILooseObject = {}\r\n  no.Price = 123.12345678901234\r\n  const fix: string = toFix(no)\r\n  expect(fix).toEqual('44=123.12345678901234|')\r\n})\r\n\r\ntest('encode -ve numeric (double 14dp) Price ', () => {\r\n  const no: ILooseObject = {}\r\n  no.Price = -123.12345678901234\r\n  const fix: string = toFix(no)\r\n  expect(fix).toEqual('44=-123.12345678901234|')\r\n})\r\n\r\ntest('encode +ve string Price ', () => {\r\n  const no: ILooseObject = {}\r\n  no.Price = '123.12345678901234'\r\n  const fix: string = toFix(no)\r\n  expect(fix).toEqual('44=123.12345678901234|')\r\n})\r\n\r\ntest('encode LocalDate TradeDate ', () => {\r\n  const no: ILooseObject = {}\r\n  no.TradeDate = localDate\r\n  const fix: string = toFix(no)\r\n  expect(fix).toEqual('75=20180725|')\r\n})\r\n\r\ntest('encode UTCTIMESTAMP ExpireTime ', () => {\r\n  const no: ILooseObject = {}\r\n  no.ExpireTime = utcTimeStamp\r\n  const fix: string = toFix(no)\r\n  expect(fix).toEqual('126=20180610-16:35:00.246|')\r\n})\r\n\r\ntest('encode UTCTIMESTAMP ExpireTime - check padding', () => {\r\n  const no: ILooseObject = {}\r\n  no.ExpireTime = new Date(Date.UTC(2018, 0, 1, 0, 0, 0, 1))\r\n  const fix: string = toFix(no)\r\n  expect(fix).toEqual('126=20180101-00:00:00.001|')\r\n})\r\n\r\ntest('encode UTCDATEONLY MDEntryDate', () => {\r\n  const mdGrp: ComponentFieldDefinition = definitions.component.get('MDFullGrp')\r\n  expect(mdGrp).toBeTruthy()\r\n  const grp: ILooseObject = {\r\n    NoMDEntries: [\r\n      {\r\n        MDEntryType: '0',\r\n        MDEntryDate: utcDate\r\n      }\r\n    ]\r\n  }\r\n  const fix: string = toFix(grp, mdGrp)\r\n  expect(fix).toEqual('268=1|269=0|272=20180610|')\r\n})\r\n\r\ntest('encode UTCTIMEONLY MDEntryTime', () => {\r\n  const mdGrp: ComponentFieldDefinition = definitions.component.get('MDFullGrp')\r\n  expect(mdGrp).toBeTruthy()\r\n  const grp: ILooseObject = {\r\n    NoMDEntries: [\r\n      {\r\n        MDEntryType: '0',\r\n        MDEntryTime: utcTime\r\n      }\r\n    ]\r\n  }\r\n  const fix: string = toFix(grp, mdGrp)\r\n  expect(fix).toEqual('268=1|269=0|273=16:35:00.246|')\r\n})\r\n\r\ntest('encode BOOLEAN (true) ReportToExch', () => {\r\n  expect(er).toBeTruthy()\r\n  const e: ILooseObject = {}\r\n  e.ReportToExch = true\r\n  const fix: string = toFix(e, er)\r\n  expect(fix).toEqual('113=Y|')\r\n})\r\n\r\ntest('encode BOOLEAN (truthy) ReportToExch', () => {\r\n  expect(er).toBeTruthy()\r\n  const e: ILooseObject = {}\r\n  e.ReportToExch = 1\r\n  const fix: string = toFix(e, er)\r\n  expect(fix).toEqual('113=Y|')\r\n})\r\n\r\ntest('encode BOOLEAN (string) ReportToExch', () => {\r\n  expect(er).toBeTruthy()\r\n  const e: ILooseObject = {}\r\n  e.ReportToExch = 'TRUE'\r\n  const fix: string = toFix(e, er)\r\n  expect(fix).toEqual('113=Y|')\r\n})\r\n\r\ntest('encode BOOLEAN (false) ReportToExch', () => {\r\n  expect(er).toBeTruthy()\r\n  const e: ILooseObject = {}\r\n  e.ReportToExch = false\r\n  const fix: string = toFix(e, er)\r\n  expect(fix).toEqual('113=N|')\r\n})\r\n\r\ntest('encode BOOLEAN (falsy) ReportToExch', () => {\r\n  expect(er).toBeTruthy()\r\n  const e: ILooseObject = {}\r\n  e.ReportToExch = 0\r\n  const fix: string = toFix(e, er)\r\n  expect(fix).toEqual('113=N|')\r\n})\r\n\r\ntest('encode RawData EncodedText', () => {\r\n  expect(er).toBeTruthy()\r\n  const toEncode: string = 'this is fix'\r\n  const e: ILooseObject = {\r\n    EncodedText: Buffer.alloc(toEncode.length, toEncode, 'utf8')\r\n  }\r\n  const fix: string = toFix(e, er)\r\n  expect(fix).toEqual('354=11|355=this is fix|')\r\n})\r\n\r\ntest('encode empty RawData EncodedText', () => {\r\n  expect(er).toBeTruthy()\r\n  const toEncode: string = ''\r\n  const e: ILooseObject = {\r\n    EncodedText: Buffer.alloc(toEncode.length, toEncode, 'utf8')\r\n  }\r\n  const fix: string = toFix(e, er)\r\n  expect(fix).toEqual('354=0|355=|')\r\n})\r\n\r\nfunction getParties (): ILooseObject {\r\n  return {\r\n    'Parties': {\r\n      'NoPartyIDs': [\r\n        {\r\n          'PartyID': 'magna.',\r\n          'PartyIDSource': '9',\r\n          'PartyRole': 28\r\n        },\r\n        {\r\n          'PartyID': 'iaculis',\r\n          'PartyIDSource': 'F',\r\n          'PartyRole': 2\r\n        }]\r\n    }\r\n  }\r\n}\r\n\r\nfunction getPartiesNoDelimiter (): ILooseObject {\r\n  return {\r\n    'Parties': {\r\n      'NoPartyIDs': [\r\n        {\r\n                    // missing PartyID\r\n          'PartyIDSource': '9',\r\n          'PartyRole': 28\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n\r\ntest('encode repeated group of simple repository Parties', () => {\r\n  expect(er).toBeTruthy()\r\n  const e: ILooseObject = getParties()\r\n  const fix: string = toFix(e, er)\r\n  expect(fix).toEqual('453=2|448=magna.|447=9|452=28|448=iaculis|447=F|452=2|')\r\n})\r\n\r\ntest('encode repeated group with no delimiter - should throw', () => {\r\n  expect(er).toBeTruthy()\r\n  const e: ILooseObject = getPartiesNoDelimiter()\r\n  function run (): void {\r\n    toFix(e, er)\r\n  }\r\n  expect(run).toThrow(/no delimiter/)\r\n})\r\n\r\ntest('encode repeated group with no array - should throw', () => {\r\n  expect(er).toBeTruthy()\r\n  const e: ILooseObject = {\r\n    'Parties': {\r\n      'NoPartyIDs': 'should be an array'\r\n    }\r\n  }\r\n  function run (): void {\r\n    toFix(e, er)\r\n  }\r\n  expect(run).toThrow(/expected array/)\r\n})\r\n\r\ntest('encode repeated group with empty array', () => {\r\n  expect(er).toBeTruthy()\r\n  const e: ILooseObject = {\r\n    'Parties': {\r\n      'NoPartyIDs': []\r\n    }\r\n  }\r\n  expect(toFix(e, er)).toEqual('453=0|')\r\n})\r\n\r\nfunction getInstrument (): ILooseObject {\r\n  return {\r\n    'Instrument': {\r\n      'Symbol': 'ac,',\r\n      'SymbolSfx': 'non',\r\n      'SecurityID': 'Pellentesque',\r\n      'SecurityIDSource': 'B',\r\n      'Product': 2\r\n    }\r\n  }\r\n}\r\n\r\nfunction getInstrumentNestedGroup (): ILooseObject {\r\n  return {\r\n    'Instrument': {\r\n      'Symbol': 'ac,',\r\n      'SymbolSfx': 'non',\r\n      'SecurityID': 'Pellentesque',\r\n      'SecurityIDSource': 'B',\r\n      'SecAltIDGrp': {\r\n        'NoSecurityAltID': [\r\n          {\r\n            'SecurityAltID': 'lorem',\r\n            'SecurityAltIDSource': 'consequat'\r\n          },\r\n          {\r\n            'SecurityAltID': 'sapien',\r\n            'SecurityAltIDSource': 'tempor'\r\n          }\r\n        ]\r\n      },\r\n      'Product': 2\r\n    }\r\n  }\r\n}\r\n\r\ntest('encode component', () => {\r\n  expect(er).toBeTruthy()\r\n  const e: ILooseObject = getInstrument()\r\n  expect(toFix(e, er)).toEqual('55=ac,|65=non|48=Pellentesque|22=B|460=2|')\r\n})\r\n\r\ntest('encode component nested group', () => {\r\n  expect(er).toBeTruthy()\r\n  const e: ILooseObject = getInstrumentNestedGroup()\r\n  expect(toFix(e, er)).toEqual('55=ac,|65=non|48=Pellentesque|22=B|454=2|455=lorem|456=consequat|455=sapien|456=tempor|460=2|')\r\n})\r\n\r\ntest('encode group missing delimiter', () => {\r\n  expect(er).toBeTruthy()\r\n  const e: ILooseObject = getInstrumentNestedGroup()\r\n  delete e.Instrument.SecAltIDGrp.NoSecurityAltID[0]['SecurityAltID']\r\n  function run () {\r\n    toFix(e, er)\r\n  }\r\n  expect(run).toThrow(/group instance with no delimiter field SecurityAltID/)\r\n})\r\n\r\ntest('encode group not an array of', () => {\r\n  expect(er).toBeTruthy()\r\n  const e: ILooseObject = {\r\n    'Instrument': {\r\n      'Symbol': 'ac,',\r\n      'SymbolSfx': 'non',\r\n      'SecurityID': 'Pellentesque',\r\n      'SecurityIDSource': 'B',\r\n      'SecAltIDGrp': {\r\n        'NoSecurityAltID': {\r\n          elements: []\r\n        }\r\n      },\r\n      'Product': 2\r\n    }\r\n  }\r\n  function run () {\r\n    toFix(e, er)\r\n  }\r\n  expect(run).toThrow(/expected array instance for group NoSecurityAltID/)\r\n})\r\n"]}