{"version":3,"file":"make-config.js","sourceRoot":"","sources":["../../src/transport/make-config.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,sCAAsC;AAGtC,sCAAyE;AAEzE,kCAAwC;AAExC,SAAsB,UAAU,CAAE,WAAgC,EAAE,UAA8B,EAAE,UAA8B;;QAChI,OAAO,IAAI,OAAO,CAAe,CAAO,MAAM,EAAE,MAAM,EAAE,EAAE;YACxD,IAAI;gBACF,MAAM,WAAW,GAAmB,MAAM,qBAAc,CAAC,WAAW,CAAC,WAAW,CAAC,UAAU,EACzF,CAAC,CAAS,EAAE,EAAE,CAAC,UAAU,CAAC,MAAM,CAAC,GAAG,WAAW,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,EAAE,CAAC,CAAC,CAAA;gBAC3E,MAAM,MAAM,GAAG,IAAI,oBAAW,CAAC,UAAU,EAAE,WAAW,EAAE,WAAW,EAAE,mBAAU,CAAC,GAAG,EAAE,UAAU,CAAC,CAAA;gBAChG,MAAM,CAAC,MAAM,CAAC,CAAA;aACf;YAAC,OAAO,CAAC,EAAE;gBACV,MAAM,CAAC,CAAC,CAAC,CAAA;aACV;QACH,CAAC,CAAA,CAAC,CAAA;IACJ,CAAC;CAAA;AAXD,gCAWC","sourcesContent":["import { AsciiChars } from '../buffer'\r\nimport { ISessionDescription } from './session-description'\r\nimport { ISessionMsgFactory } from './fix-msg-factory'\r\nimport { IJsFixConfig, JsFixConfig, JsFixLoggerFactory } from '../config'\r\nimport { FixDefinitions } from '../dictionary/definition'\r\nimport { getDefinitions } from '../util'\r\n\r\nexport async function makeConfig (description: ISessionDescription, logFactory: JsFixLoggerFactory, msgFactory: ISessionMsgFactory): Promise<IJsFixConfig> {\r\n  return new Promise<IJsFixConfig>(async (accept, reject) => {\r\n    try {\r\n      const definitions: FixDefinitions = await getDefinitions(description.application.dictionary,\r\n        (t: string) => logFactory.logger(`${description.application.type}.${t}`))\r\n      const config = new JsFixConfig(msgFactory, definitions, description, AsciiChars.Soh, logFactory)\r\n      accept(config)\r\n    } catch (e) {\r\n      reject(e)\r\n    }\r\n  })\r\n}\r\n"]}